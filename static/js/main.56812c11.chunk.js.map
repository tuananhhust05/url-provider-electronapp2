{"version":3,"sources":["context/AuthReducer.js","context/AuthContext.js","components/user/user.jsx","components/topbar/Topbar.jsx","dummyData.js","components/closeFriend/CloseFriend.jsx","components/sidebar/Sidebar.jsx","components/post/Post.jsx","components/share/Share.jsx","components/feed/Feed.jsx","components/online/Online.jsx","components/rightbar/Rightbar.jsx","pages/home/Home.jsx","apiCalls.js","pages/login/Login.jsx","pages/profile/Profile.jsx","pages/register/Register.jsx","components/conversations/Conversation.jsx","components/message/Message.jsx","components/chatOnline/ChatOnline.jsx","pages/messenger/Messenger.jsx","pages/test.jsx","App.js","index.js"],"names":["AuthReducer","state","action","type","user","isFetching","error","payload","followings","filter","following","INITIAL_STATE","JSON","parse","localStorage","getItem","AuthContext","createContext","AuthContextProvider","children","useReducer","dispatch","useEffect","setItem","stringify","Provider","value","User","userInfor","currentUser","PF","_id","className","src","profilePicture","alt","username","Topbar","socketServer","useContext","useState","openCreateGroup","setOpenCreateGroup","alluser","setAlluser","chosenUser","setChosenUser","handleSubmit","a","result","m","console","log","axios","post","arraymember","res","current","emit","data","sender","receiver","get","getAlluser","to","style","textDecoration","onClick","cursor","color","margin","position","top","backgroundColor","height","width","boxShadow","borderRadius","right","map","display","fontSize","checked","includes","onChange","id","prev","item","bottom","Search","placeholder","Person","Chat","Notifications","Users","CloseFriend","Sidebar","RssFeed","PlayCircleFilledOutlined","Group","Bookmark","HelpOutline","WorkOutline","Event","School","u","Post","likes","length","like","setLike","isLiked","setIsLiked","setUser","userId","fetchUser","likeHandler","put","err","format","createdAt","MoreVert","desc","img","comment","Share","useRef","file","setFile","submitHandler","e","preventDefault","newPost","FormData","fileName","Date","now","name","append","window","location","reload","ref","URL","createObjectURL","Cancel","onSubmit","htmlFor","PermMedia","htmlColor","accept","target","files","Label","Room","EmojiEmotions","Feed","posts","setPosts","sort","p1","p2","fetchPosts","p","Online","Rightbar","friends","followed","setFollowed","handleClick","HomeRightbar","ProfileRightbar","Remove","Add","city","from","relationship","friend","Home","loginCall","userCredential","undefined","email","alert","Login","password","history","useHistory","push","required","minLength","disabled","CircularProgress","size","Profile","useParams","coverPicture","Register","passwordAgain","setCustomValidity","Conversation","conversation","convSearch","conSetup","setConSetup","userLocal","setUserLocal","friendIdarray","members","iduserArray","getUser","handleDeleteCon","new_arr","receiverId","member","senderId","status","Message","listMes","setListMes","memberMes","message","own","deleteMesBut","setDeleteMesBut","nameSender","setNameSender","getNameSender","hadleDeleteMessage","text","idConversation","conversationId","idmes","marginTop","substring","maxWidth","controls","href","zIndex","class","ChatOnline","userDetail","setUserDetail","getuser","Messenger","socketId","conversations","setConversations","currentChat","setCurrentChat","messages","setMessages","newMessage","setNewMessage","scrollRef","chatUsers","setChatUsers","arrivalMessage","setArrivalMessage","arrivalConversation","setArrivalConversation","searchCon","setSearchCon","socket","io","on","getMessages","getCoversation","sortCoversation","new_conv_a","new_conv2","new_conv3","i","new_conv","mem","users","getConversations","useDropzone","onDrop","accceptedFiles","formData","header","then","response","success","url","response1","response2","getRootProps","getInputProps","handleSeeCoversation","c","index","findIndex","val","sort_conv","handleCreateCoversation","scrollIntoView","behavior","marginLeft","courses","Test","setChecked","padding","course","App","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.56812c11.chunk.js","sourcesContent":["// xử lý  các case dựa vào action.type \nconst AuthReducer = (state, action) => {\n  // các action được dispatch lên từ các chức năng: login , login success,......\n  switch (action.type) {\n    case \"LOGIN_START\":\n      return {\n        user: null,\n        isFetching: true,\n        error: false,\n      };\n    case \"LOGIN_SUCCESS\":\n      return {\n        user: action.payload,\n        isFetching: false,\n        error: false,\n      };\n    case \"LOGIN_FAILURE\":\n      return {\n        user: null,\n        isFetching: false,\n        error: true,\n      };\n    case \"FOLLOW\":\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          followings: [...state.user.followings, action.payload],\n        },\n      };\n    case \"UNFOLLOW\":\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          followings: state.user.followings.filter(\n            (following) => following !== action.payload\n          ),\n        },\n      };\n    default:\n      return state;\n  }\n};\n\nexport default AuthReducer;\n","import { createContext, useEffect, useReducer } from \"react\";\nimport AuthReducer from \"./AuthReducer\";\n\nconst INITIAL_STATE = {   // khởi tạo dữ liêuj global state thông qua local storage \n  user:JSON.parse(localStorage.getItem(\"user\")) || null,\n  isFetching: false,\n  error: false,\n};\n\n// tạo ra context chứa dữ liệu \n// mỗi khi user gọi đến useContext thì lệnh khởi tạo INITIAL_STATE được gọi lại. \nexport const AuthContext = createContext(INITIAL_STATE);\n\n//Dùng để khởi tạo cấu trúc reducer \n// state ở đây là global state trong redux \n// children là element con ; children con (App) phải sử dụng dữ liệu chung của authcontex. provider \nexport const AuthContextProvider = ({ children }) => {\n  // dispatch thằng state đến authReducer ( AuReducer có state khởi tạo là initState )\n  const [state, dispatch] = useReducer(AuthReducer, INITIAL_STATE);\n  \n  // dữ liệu của user lấy từ local storage \n  useEffect(()=>{\n    // Khai báo để đẩy dữ liệu authentication của user lên localStorage \n    // state là action được dispath lên \n    localStorage.setItem(\"user\", JSON.stringify(state.user))\n  },[state.user])\n  \n  // kiến thức về react useContext;\n  return (\n    /*Config dữ liệu trong redux*/\n    <AuthContext.Provider\n      value={{\n        user: state.user,\n        isFetching: state.isFetching,\n        error: state.error,\n        dispatch,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n","import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport \"./chatOnline.css\"\r\n\r\n// thằng này nó sẽ hiện ra danh sách bạn bè đang online của bạn và nếu bạn click vào \r\n// thì có thể trò chuyện với họ \r\n\r\nexport default function User({userInfor,currentUser}) {\r\n  const PF = \"https://messenger-api-express.herokuapp.com/images/\";\r\n    //logic cần nằm trong thẻ dom \r\n    return (\r\n      <div>\r\n          {(userInfor._id==currentUser._id) ? (\r\n              <div>\r\n              </div>\r\n          ) : (\r\n            <div className=\"chatOnline\">\r\n        \r\n                  <div className=\"chatOnlineFriend\" >\r\n                    <div className=\"chatOnlineImgContainer\">\r\n                    <img\r\n                        className=\"conversationImg\"\r\n                        src={\r\n                          userInfor?.profilePicture\r\n                            ? PF + userInfor.profilePicture\r\n                            : PF + \"person/noAvatar.png\"\r\n                        }\r\n                        alt=\"\"\r\n                      />\r\n                      <div className=\"chatOnlineBadge\"></div>\r\n                    </div>\r\n                    <span className=\"chatOnlineName\">{userInfor.username}</span>\r\n                  </div>\r\n          </div>\r\n\r\n          )}\r\n      </div>\r\n     \r\n\r\n\r\n     \r\n    );\r\n  }","import \"./topbar.css\";\nimport { Search, Person, Chat, Notifications } from \"@material-ui/icons\";\nimport { Link } from \"react-router-dom\";\nimport { useContext } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport axios from \"axios\"\nimport User from \"../user/user\" \n\nexport default function Topbar({ socketServer }) {\n  \n  \n\n  // lấy thông tin đăng nhập từ con text \n  const { user } = useContext(AuthContext);\n  const PF = \"https://messenger-api-express.herokuapp.com/images/\";\n  const [openCreateGroup, setOpenCreateGroup] = useState(false)\n  const [alluser, setAlluser] = useState([])\n  const [chosenUser, setChosenUser] = useState([user._id]); // chosen user\n  const handleCheck=(id) =>{\n    setChosenUser( prev=>{\n      const isChecked =chosenUser.includes(id)  // kiểm tra trong mảng đã có id này chưa\n      if(isChecked){ // nếu có rôif thì thay thuộc tính cho nó \n        return chosenUser.filter(item=>item!==id) // lọc ra những thằng id khác với id truyền vào \n      }\n      else{  // nếu trong tập hợp không có thì trả ra mảng cũ và id mới \n        return[...prev,id] \n      }\n    })\n }\n \n const handleSubmit= async () =>{\n  setOpenCreateGroup(false);\n  \n  let finalchosenUser=chosenUser;\n  let result=finalchosenUser.filter(m=>m !==user._id)\n  console.log(result);\n  console.log(chosenUser)\n  const res = await axios.post(\"/conversations/multiconv\", {arraymember:chosenUser}); \n  socketServer.current.emit(\"CreateGroup\", {\n    _id:res.data._id,\n    sender:user._id,\n    receiver:result\n   });\n  \n  \n }\n  useEffect(() => {  // lấy ra danh sách message khi current chat thay đổi\n    const getAlluser = async () => {\n      try {\n        const res = await axios.get(\"/users/alluser\");  // current chat có thể rỗng vì ban đầu có thể chưa chọn \n        setAlluser(res.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getAlluser();\n  },[]);\n  \n\n  return (\n    <div className=\"topbarContainer\">\n      <div className=\"topbarLeft\">\n        <Link to=\"/\" style={{ textDecoration: \"none\" }}>\n          <span className=\"logo\">Message</span>\n        </Link>\n      </div>\n      {/*Phím tạo nhóm*/}\n      <div onClick={() =>setOpenCreateGroup(true)} style={{cursor:\"pointer\"}} className=\"topbarLeft\">\n        <i style={{color:\"white\"}} className=\"fa-solid fa-plus\"></i>\n        <span style={{color:\"white\",margin:\"5px\"}}>Tạo nhóm</span>\n      </div>\n      {/*Form tạo nhóm*/}\n      {\n        openCreateGroup?\n        ( <form>\n            <div style={{position:\"fixed\",top:\"20%\",backgroundColor:\"white\",height:\"400px\", width:\"400px\",boxShadow:\"2px 2px 2px black\",borderRadius:\"10px\"}}>\n                <i onClick={() =>setOpenCreateGroup(false)} style={{position:\"absolute\",right:\"5px\",top:\"7px\"}}className=\"fa-solid fa-xmark\"></i>\n                 \n                {alluser.map(m =>(\n                  <div style={{display:\"flex\"}} key={m._id}>\n                     <User \n                                userInfor={m} \n                                currentUser={user}\n                      />\n                    {\n                      (m._id !==user._id) ?(\n                        <input style={{position:\"absolute\",right:\"5px\",fontSize:\"50px\",margin:\"30px\"}} type=\"checkbox\"\n                        checked={chosenUser.includes(m._id)}// kiểm tra thằng này có id có nămf trong chosen id không \n                        onChange={()=>handleCheck(m._id)}\n                        />\n                      ):(\n                        <div></div>\n                      )\n                    }\n                  </div>\n                ))}\n                <button onClick={() =>handleSubmit()} className=\"btn btn-primary\" style={{position:\"absolute\",bottom:\"5px\",margin:\"0 30%\"}}>\n                  Tạo nhóm\n                </button>\n            </div>\n          </form>\n        ):\n        (\n          <div></div>\n        )\n      }\n        \n      <div className=\"topbarCenter\">\n        <div className=\"searchbar\">\n          <Search className=\"searchIcon\" />\n          <input\n            placeholder=\"Search for friend, post or video\"\n            className=\"searchInput\"\n          />\n        </div>\n      </div>\n      <div className=\"topbarRight\">\n        <div className=\"topbarLinks\">\n          <span className=\"topbarLink\">Homepage</span>\n          <span className=\"topbarLink\">Timeline</span>\n        </div>\n        <div className=\"topbarIcons\">\n          <div className=\"topbarIconItem\">\n            <Person />\n            <span className=\"topbarIconBadge\">1</span>\n          </div>\n          <div className=\"topbarIconItem\">\n            <Chat />\n            <span className=\"topbarIconBadge\">2</span>\n          </div>\n          <div className=\"topbarIconItem\">\n            <Notifications />\n            <span className=\"topbarIconBadge\">1</span>\n          </div>\n        </div>\n        {/*Đường link truy cập lên DB để lấy thông tin điền vào profile*/}\n        <Link to={`/profile/${user.username}`}>\n          <img\n            src={\n              user.profilePicture\n                ? PF + user.profilePicture\n                : PF + \"person/noAvatar.png\"\n            }\n            alt=\"\"\n            className=\"topbarImg\"\n          />\n        </Link>\n      </div>\n    </div>\n  );\n}\n","export const Users = [\n  {\n    id:1,\n    profilePicture: \"person/1.jpeg\",\n    username: \"Safak Kocaoglu\",\n  },\n  {\n    id:2,\n    profilePicture: \"person/2.jpeg\",\n    username: \"Janell Shrum\",\n  },\n  {\n    id:3,\n    profilePicture: \"person/3.jpeg\",\n    username: \"Alex Durden\",\n  },\n  {\n    id:4,\n    profilePicture: \"person/4.jpeg\",\n    username: \"Dora Hawks\",\n  },\n  {\n    id:5,\n    profilePicture: \"person/5.jpeg\",\n    username: \"Thomas Holden\",\n  },\n  {\n    id:6,\n    profilePicture: \"person/6.jpeg\",\n    username: \"Shirley Beauchamp\",\n  },\n  {\n    id:7,\n    profilePicture: \"person/7.jpeg\",\n    username: \"Travis Bennett\",\n  },\n  {\n    id:8,\n    profilePicture: \"person/8.jpeg\",\n    username: \"Kristen Thomas\",\n  },\n  {\n    id:9,\n    profilePicture: \"person/9.jpeg\",\n    username: \"Gary Duty\",\n  },\n  {\n    id:10,\n    profilePicture: \"person/10.jpeg\",\n    username: \"Safak Kocaoglu\",\n  },\n];\n\nexport const Posts = [\n  {\n    id: 1,\n    desc: \"Love For All, Hatred For None.\",\n    photo: \"post/1.jpeg\",\n    date: \"5 mins ago\",\n    userId: 1,\n    like: 32,\n    comment: 9,\n  },\n  {\n    id: 2,\n    photo: \"post/2.jpeg\",\n    date: \"15 mins ago\",\n    userId: 2,\n    like: 2,\n    comment: 1,\n  },\n  {\n    id: 3,\n    desc: \"Every moment is a fresh beginning.\",\n    photo: \"post/3.jpeg\",\n    date: \"1 hour ago\",\n    userId: 3,\n    like: 61,\n    comment: 2,\n  },\n  {\n    id: 4,\n    photo: \"post/4.jpeg\",\n    date: \"4 hours ago\",\n    userId: 4,\n    like: 7,\n    comment: 3,\n  },\n  {\n    id: 5,\n    photo: \"post/5.jpeg\",\n    date: \"5 hours ago\",\n    userId: 5,\n    like: 23,\n    comment: 5,\n  },\n  {\n    id: 6,\n    photo: \"post/6.jpeg\",\n    date: \"1 day ago\",\n    userId: 6,\n    like: 44,\n    comment: 6,\n  },\n  {\n    id: 7,\n    desc: \"Never regret anything that made you smile.\",\n    photo: \"post/7.jpeg\",\n    date: \"2 days ago\",\n    userId: 7,\n    like: 52,\n    comment: 3,\n  },\n  {\n    id: 8,\n    photo: \"post/8.jpeg\",\n    date: \"3 days ago\",\n    userId: 8,\n    like: 15,\n    comment: 1,\n  },\n  {\n    id: 9,\n    desc: \"Change the world by being yourself.\",\n    photo: \"post/9.jpeg\",\n    date: \"5 days ago\",\n    userId: 9,\n    like: 11,\n    comment: 2,\n  },\n  {\n    id: 10,\n    photo: \"post/10.jpeg\",\n    date: \"1 week ago\",\n    userId: 10,\n    like: 104,\n    comment: 12,\n  },\n];\n","import \"./closeFriend.css\";\n\nexport default function CloseFriend({user}) {\n  const PF = \"https://messenger-api-express.herokuapp.com/images/\";\n  return (\n    <li className=\"sidebarFriend\">\n      <img className=\"sidebarFriendImg\" src={PF+user.profilePicture} alt=\"\" />\n      <span className=\"sidebarFriendName\">{user.username}</span>\n    </li>\n  );\n}\n","import \"./sidebar.css\";\nimport {\n  RssFeed,\n  Chat,\n  PlayCircleFilledOutlined,\n  Group,\n  Bookmark,\n  HelpOutline,\n  WorkOutline,\n  Event,\n  School,\n} from \"@material-ui/icons\";\nimport { Users } from \"../../dummyData\";\nimport CloseFriend from \"../closeFriend/CloseFriend\";\nimport {Link} from 'react-router-dom'\n\nexport default function Sidebar() {\n  // mới có UI \n  return (\n    <div className=\"sidebar\">\n      <div className=\"sidebarWrapper\">\n        <ul className=\"sidebarList\">\n          <li className=\"sidebarListItem\">\n            <RssFeed className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Feed</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <Chat className=\"sidebarIcon\" />\n            <Link  to=\"/register\"><span className=\"sidebarListItemText\">Chats</span></Link>\n          </li>\n          <li className=\"sidebarListItem\">\n            <PlayCircleFilledOutlined className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Videos</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <Group className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Groups</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <Bookmark className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Bookmarks</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <HelpOutline className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Questions</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <WorkOutline className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Jobs</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <Event className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Events</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <School className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Courses</span>\n          </li>\n        </ul>\n        <button className=\"sidebarButton\">Show More</button>\n        <hr className=\"sidebarHr\" />\n        <ul className=\"sidebarFriendList\">\n          {Users.map((u) => (\n            <CloseFriend key={u.id} user={u} />\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n","import \"./post.css\";\nimport { MoreVert } from \"@material-ui/icons\";\nimport { useContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { format } from \"timeago.js\";\nimport { Link } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/AuthContext\";\n\nexport default function Post({ post }) {\n  const [like, setLike] = useState(post.likes.length);\n  const [isLiked, setIsLiked] = useState(false);\n  const [user, setUser] = useState({});\n  const PF = \"https://messenger-api-express.herokuapp.com/images/\";\n  const { user: currentUser } = useContext(AuthContext);\n\n  useEffect(() => {\n    setIsLiked(post.likes.includes(currentUser._id));\n  }, [currentUser._id, post.likes]);\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      const res = await axios.get(`/users?userId=${post.userId}`);\n      setUser(res.data);\n    };\n    fetchUser();\n  }, [post.userId]);\n\n  const likeHandler = () => {\n    try {\n      axios.put(\"/posts/\" + post._id + \"/like\", { userId: currentUser._id });\n    } catch (err) {}\n    setLike(isLiked ? like - 1 : like + 1);\n    setIsLiked(!isLiked);\n  };\n  return (\n    <div className=\"post\">\n      <div className=\"postWrapper\">\n        <div className=\"postTop\">\n          <div className=\"postTopLeft\">\n            <Link to={`/profile/${user.username}`}>\n              <img\n                className=\"postProfileImg\"\n                src={\n                  user.profilePicture\n                    ? PF + user.profilePicture\n                    : PF + \"person/noAvatar.png\"\n                }\n                alt=\"\"\n              />\n            </Link>\n            <span className=\"postUsername\">{user.username}</span>\n            <span className=\"postDate\">{format(post.createdAt)}</span>\n          </div>\n          <div className=\"postTopRight\">\n            <MoreVert />\n          </div>\n        </div>\n        <div className=\"postCenter\">\n          <span className=\"postText\">{post?.desc}</span>\n          <img className=\"postImg\" src={PF + post.img} alt=\"\" />\n        </div>\n        <div className=\"postBottom\">\n          <div className=\"postBottomLeft\">\n            <img\n              className=\"likeIcon\"\n              src={`${PF}like.png`}\n              onClick={likeHandler}\n              alt=\"\"\n            />\n            <img\n              className=\"likeIcon\"\n              src={`${PF}heart.png`}\n              onClick={likeHandler}\n              alt=\"\"\n            />\n            <span className=\"postLikeCounter\">{like} people like it</span>\n          </div>\n          <div className=\"postBottomRight\">\n            <span className=\"postCommentText\">{post.comment} comments</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import \"./share.css\";\nimport {\n  PermMedia,\n  Label,\n  Room,\n  EmojiEmotions,\n  Cancel,\n} from \"@material-ui/icons\";\nimport { useContext, useRef, useState } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport axios from \"axios\";\n\nexport default function Share() {\n  const { user } = useContext(AuthContext);\n  const PF = \"https://messenger-api-express.herokuapp.com/images/\";\n  const desc = useRef();\n  const [file, setFile] = useState(null);\n\n  const submitHandler = async (e) => {\n    e.preventDefault();\n    const newPost = {\n      userId: user._id,\n      desc: desc.current.value,\n    };\n    if (file) {\n      const data = new FormData();\n      const fileName = Date.now() + file.name;\n      data.append(\"name\", fileName);\n      data.append(\"file\", file);\n      newPost.img = fileName;\n      console.log(newPost);\n      try {\n        await axios.post(\"/upload\", data);\n      } catch (err) {}\n    }\n    try {\n      await axios.post(\"/posts\", newPost);\n      window.location.reload();\n    } catch (err) {}\n  };\n\n  return (\n    <div className=\"share\">\n      <div className=\"shareWrapper\">\n        <div className=\"shareTop\">\n          <img\n            className=\"shareProfileImg\"\n            src={\n              user.profilePicture\n                ? PF + user.profilePicture\n                : PF + \"person/noAvatar.png\"\n            }\n            alt=\"\"\n          />\n          <input\n            placeholder={\"What's in your mind \" + user.username + \"?\"}\n            className=\"shareInput\"\n            ref={desc}\n          />\n        </div>\n        <hr className=\"shareHr\" />\n        {file && (\n          <div className=\"shareImgContainer\">\n            <img className=\"shareImg\" src={URL.createObjectURL(file)} alt=\"\" />\n            <Cancel className=\"shareCancelImg\" onClick={() => setFile(null)} />\n          </div>\n        )}\n        <form className=\"shareBottom\" onSubmit={submitHandler}>\n          <div className=\"shareOptions\">\n            <label htmlFor=\"file\" className=\"shareOption\">\n              <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Photo or Video</span>\n              <input\n                style={{ display: \"none\" }}\n                type=\"file\"\n                id=\"file\"\n                accept=\".png,.jpeg,.jpg\"\n                onChange={(e) => setFile(e.target.files[0])}\n              />\n            </label>\n            <div className=\"shareOption\">\n              <Label htmlColor=\"blue\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Tag</span>\n            </div>\n            <div className=\"shareOption\">\n              <Room htmlColor=\"green\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Location</span>\n            </div>\n            <div className=\"shareOption\">\n              <EmojiEmotions htmlColor=\"goldenrod\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Feelings</span>\n            </div>\n          </div>\n          <button className=\"shareButton\" type=\"submit\">\n            Share\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import { useContext, useEffect, useState } from \"react\";\nimport Post from \"../post/Post\";\nimport Share from \"../share/Share\";\nimport \"./feed.css\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../../context/AuthContext\";\n\nexport default function Feed({ username }) {\n  const [posts, setPosts] = useState([]);\n  const { user } = useContext(AuthContext);\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const res = username\n        ? await axios.get(\"/posts/profile/\" + username)\n        : await axios.get(\"posts/timeline/\" + user._id);\n      setPosts(\n        res.data.sort((p1, p2) => {\n          return new Date(p2.createdAt) - new Date(p1.createdAt);\n        })\n      );\n    };\n    fetchPosts();\n  }, [username, user._id]);\n\n  return (\n    <div className=\"feed\">\n      <div className=\"feedWrapper\">\n        {(!username || username === user.username) && <Share />}\n        {posts.map((p) => (\n          <Post key={p._id} post={p} />\n        ))}\n      </div>\n    </div>\n  );\n}\n","import \"./online.css\";\n\nexport default function Online({user}) {\n  const PF = \"https://messenger-api-express.herokuapp.com/images/\";\n\n  return (\n    <li className=\"rightbarFriend\">\n      <div className=\"rightbarProfileImgContainer\">\n        <img className=\"rightbarProfileImg\" src={PF+user.profilePicture} alt=\"\" />\n        <span className=\"rightbarOnline\"></span>\n      </div>\n      <span className=\"rightbarUsername\">{user.username}</span>\n    </li>\n  );\n}\n","import \"./rightbar.css\";\nimport { Users } from \"../../dummyData\";\nimport Online from \"../online/Online\";\nimport { useContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { Add, Remove } from \"@material-ui/icons\";\n\nexport default function Rightbar({ user }) {\n  const PF = \"https://messenger-api-express.herokuapp.com/images/\";\n  // lấy danh sách thông tin bạn bè \n  const [friends, setFriends] = useState([]);\n  // lấy thông tin user từ context \n  const { user: currentUser, dispatch } = useContext(AuthContext);\n  const [followed, setFollowed] = useState(\n    currentUser.followings.includes(user?.id)\n  );\n  \n  // lấy danh sách bạn bè \n  // useEffect(() => {\n  //   const getFriends = async () => {\n  //     try {\n  //       const friendList = await axios.get(\"/users/friends/\" + user._id);\n  //       setFriends(friendList.data);\n  //     } catch (err) {\n  //       console.log(err);\n  //     }\n  //   };\n  //   getFriends();\n  // }, [user]);\n  \n  const handleClick = async () => {\n    try {\n      if (followed) {\n        await axios.put(`/users/${user._id}/unfollow`, {\n          userId: currentUser._id,\n        });\n        dispatch({ type: \"UNFOLLOW\", payload: user._id });\n      } else {\n        await axios.put(`/users/${user._id}/follow`, {\n          userId: currentUser._id,\n        });\n        dispatch({ type: \"FOLLOW\", payload: user._id });\n      }\n      setFollowed(!followed);\n    } catch (err) {\n    }\n  };\n\n  const HomeRightbar = () => {\n    return (\n      <>\n        <div className=\"birthdayContainer\">\n          \n          <span className=\"birthdayText\">\n            <b>Pola Foster</b> and <b>3 other friends</b> have a birhday today.\n          </span>\n        </div>\n        \n        <h4 className=\"rightbarTitle\">Online Friends</h4>\n        <ul className=\"rightbarFriendList\">\n          {Users.map((u) => (\n            <Online key={u.id} user={u} />\n          ))}\n        </ul>\n      </>\n    );\n  };\n\n  // thông tin của từng người bạn \n  const ProfileRightbar = () => {\n    return (\n      <>\n        {user.username !== currentUser.username && (\n          <button className=\"rightbarFollowButton\" onClick={handleClick}>\n            {followed ? \"Unfollow\" : \"Follow\"}\n            {followed ? <Remove /> : <Add />}\n          </button>\n        )}\n        <h4 className=\"rightbarTitle\">User information</h4>\n        <div className=\"rightbarInfo\">\n          <div className=\"rightbarInfoItem\">\n            <span className=\"rightbarInfoKey\">City:</span>\n            <span className=\"rightbarInfoValue\">{user.city}</span>\n          </div>\n          <div className=\"rightbarInfoItem\">\n            <span className=\"rightbarInfoKey\">From:</span>\n            <span className=\"rightbarInfoValue\">{user.from}</span>\n          </div>\n          <div className=\"rightbarInfoItem\">\n            <span className=\"rightbarInfoKey\">Relationship:</span>\n            <span className=\"rightbarInfoValue\">\n              {user.relationship === 1\n                ? \"Single\"\n                : user.relationship === 1\n                ? \"Married\"\n                : \"-\"}\n            </span>\n          </div>\n        </div>\n        <h4 className=\"rightbarTitle\">User friends</h4>\n        <div className=\"rightbarFollowings\">\n          {friends.map((friend) => (\n            <Link\n              to={\"/profile/\" + friend.username}\n              style={{ textDecoration: \"none\" }}\n            >\n              <div className=\"rightbarFollowing\">\n                <img\n                  src={\n                    friend.profilePicture\n                      ? PF + friend.profilePicture\n                      : PF + \"person/noAvatar.png\"\n                  }\n                  alt=\"\"\n                  className=\"rightbarFollowingImg\"\n                />\n                <span className=\"rightbarFollowingName\">{friend.username}</span>\n              </div>\n            </Link>\n          ))}\n        </div>\n      </>\n    );\n  };\n  return (\n    <div className=\"rightbar\">\n      <div className=\"rightbarWrapper\">\n        {/*Hiển thị phụ thuộc vào thông tin user*/}\n        {user ? <ProfileRightbar /> : <HomeRightbar />}\n      </div>\n    </div>\n  );\n}\n","import Topbar from \"../../components/topbar/Topbar\";\nimport Sidebar from \"../../components/sidebar/Sidebar\";\nimport Feed from \"../../components/feed/Feed\";\nimport Rightbar from \"../../components/rightbar/Rightbar\";\nimport \"./home.css\"\n\nexport default function Home() {\n  return (\n    <>\n      <Topbar />\n      <div className=\"homeContainer\">\n        <Sidebar />\n        <Feed/>\n        <Rightbar/>\n      </div>\n    </>\n  );\n}\n","import axios from \"axios\";\n\n// catch lỗi ở đây là dùng  để bắt lỗi khi trò chuyện cùng server \nexport const loginCall = async (userCredential, dispatch) => {\n  dispatch({ type: \"LOGIN_START\" });\n  try {\n    const res = await axios.post(\"/auth/login\", userCredential);\n    if(res.data.email!=undefined){\n      dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\n    }\n    else{\n      alert(res.data);// in ra thông báo trả từ server\n      // sai thì không quan trọng payload\n      dispatch({ type: \"LOGIN_FAILURE\", payload:\"sai mật khẩu\" });\n    }\n  } catch (err) {\n    dispatch({ type: \"LOGIN_FAILURE\", payload: err });\n  }\n};\n","import { useContext, useRef } from \"react\"\nimport \"./login.css\"\nimport { loginCall } from \"../../apiCalls\"\nimport { AuthContext } from \"../../context/AuthContext\"\nimport { CircularProgress } from \"@material-ui/core\"\nimport { useHistory } from \"react-router\"\nimport {Link} from 'react-router-dom'\nimport axios from \"axios\"\nexport default function Login() {\n  const email = useRef();  // khai báo là biến toàn cục bên ngoiaf khi re- render thì không bọ báo lại undefined \n  const password = useRef();\n  const history = useHistory();// chuyển trang\n\n  // lấy dữ liệu từ context\n  const { isFetching, dispatch } = useContext(AuthContext); // lấy dữ liệu từ authcontext \n  // dùng cách khác để dispatch thôi \n\n  const handleClick = async (e) => {\n    e.preventDefault();\n    \n  \n    // dispatch action , trong thằng call api nó vừa dispatch action; vừa call api \n    loginCall(\n      { email: email.current.value, password: password.current.value },\n      dispatch\n    );\n    // thằng chuyển trang cũ dựa vào state mà bây giờ mình muốn verify lại thằng state nên làm lại đoạn login này \n    // Thằng state global chỉ set lại giá trị mà nó thay đổi thôi, không set lại toàn chương trình nên lệnh call api để chuyển trang sau đây vẫn có hiệu quả \n    // hiện taij chấp nhận việc phải call api 2 lần để tránh phụ thuộc vào state và khắc phục nguy cơ sự cố bên localStorage \n    const res = await axios.post(\"/auth/login\",  { email: email.current.value, password: password.current.value }); // call api \n    if(res.data.email!=undefined)\n    {\n      history.push(\"/messenger\");\n    }\n    else{\n      history.push(\"/login\");\n    }\n    \n  };\n\n  return (\n    <div className=\"login\">\n      <div className=\"loginWrapper\">\n        <div className=\"loginLeft\">\n          <h3 className=\"loginLogo\">Messeger</h3>\n          <span className=\"loginDesc\">\n            Connect with friends and the world around you on Lamasocial.\n          </span>\n        </div>\n        <div className=\"loginRight\">\n          <form className=\"loginBox\" onSubmit={handleClick}>\n            <input\n              placeholder=\"Email\"\n              type=\"email\"\n              required\n              className=\"loginInput\"\n              ref={email}\n            />\n            <input\n              placeholder=\"Password\"\n              type=\"password\"\n              required\n              minLength=\"6\"\n              className=\"loginInput\"\n              ref={password}\n            />\n            <button className=\"loginButton\" type=\"submit\" disabled={isFetching}>\n              {isFetching ? (\n                <CircularProgress color=\"white\" size=\"20px\" />\n              ) : (\n                \"Log In\"\n              )}\n            </button>\n            <span className=\"loginForgot\">Forgot Password?</span>\n            <Link  to=\"/register\">\n                <button style={{margin:'0 20%'}} className=\"loginRegisterButton\">\n                  {isFetching ? (\n                    <CircularProgress color=\"white\" size=\"20px\" />\n                  ) : (\n                    \"Create a New Account\"\n                  )}\n                </button>\n            </Link>\n            \n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import \"./profile.css\";\nimport Topbar from \"../../components/topbar/Topbar\";\nimport Sidebar from \"../../components/sidebar/Sidebar\";\nimport Feed from \"../../components/feed/Feed\";\nimport Rightbar from \"../../components/rightbar/Rightbar\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useParams } from \"react-router\";\n\nexport default function Profile() {\n  const PF = \"https://messenger-api-express.herokuapp.com/images/\";\n  const [user, setUser] = useState({});\n  const username = useParams().username;\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      const res = await axios.get(`/users?username=${username}`);\n      setUser(res.data);\n    };\n    fetchUser();\n  }, [username]);\n\n  return (\n    <>\n      <Topbar />\n      <div className=\"profile\">\n        <Sidebar />\n        <div className=\"profileRight\">\n          <div className=\"profileRightTop\">\n            <div className=\"profileCover\">\n              <img\n                className=\"profileCoverImg\"\n                src={\n                  user.coverPicture\n                    ? PF + user.coverPicture\n                    : PF + \"person/noCover.png\"\n                }\n                alt=\"\"\n              />\n              <img\n                className=\"profileUserImg\"\n                src={\n                  user.profilePicture\n                    ? PF + user.profilePicture\n                    : PF + \"person/noAvatar.png\"\n                }\n                alt=\"\"\n              />\n            </div>\n            <div className=\"profileInfo\">\n              <h4 className=\"profileInfoName\">{user.username}</h4>\n              <span className=\"profileInfoDesc\">{user.desc}</span>\n            </div>\n          </div>\n          <div className=\"profileRightBottom\">\n            <Feed username={username} />\n            <Rightbar user={user} />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","import axios from \"axios\";\nimport { useRef } from \"react\";\nimport \"./register.css\";\nimport { useHistory } from \"react-router\";\nimport {Link} from 'react-router-dom'\nexport default function Register() {\n  const username = useRef();\n  const email = useRef();\n  const password = useRef();\n  const passwordAgain = useRef();\n  const history = useHistory();// chuyển trang\n\n  const handleClick = async (e) => {\n    e.preventDefault(); // ngăn không reload trang \n    if (passwordAgain.current.value !== password.current.value) {\n      passwordAgain.current.setCustomValidity(\"Passwords don't match!\"); // nếu mật khẩu nhắc lại không trùng với mật khẩu cũ thì xuất cánh báo trên UI \n    } else {\n      // nếu ok thì tạo ra ob \n      const user = {\n        username: username.current.value,\n        email: email.current.value,\n        password: password.current.value,\n      };\n      try {\n        const res=await axios.post(\"/auth/register\", user); // call api \n        alert(res.data);\n        history.push(\"/login\");\n      } catch (err){\n        alert(err);  // có lỗi thì ngừng rôid trả ra lỗi \n      }\n    }\n  };\n\n  return (\n    <div className=\"login\">\n      <div className=\"loginWrapper\">\n        <div className=\"loginLeft\">\n          <h3 className=\"loginLogo\">Messenger</h3>\n          <span className=\"loginDesc\">\n            Connect with friends and the world around you on Lamasocial.\n          </span>\n        </div>\n        <div className=\"loginRight\">\n          {/*Lăng nghe sự kiện submit*/}\n          <form className=\"loginBox\" onSubmit={handleClick}>\n            <input\n              placeholder=\"Username\"\n              required\n              ref={username}\n              className=\"loginInput\"\n            />\n            <input\n              placeholder=\"Email\"\n              required\n              ref={email}\n              className=\"loginInput\"\n              type=\"email\"\n            />\n            <input\n              placeholder=\"Password\"\n              required\n              ref={password}\n              className=\"loginInput\"\n              type=\"password\"\n              minLength=\"6\"\n            />\n            <input\n              placeholder=\"Password Again\"\n              required\n              ref={passwordAgain} //tên biến \n              className=\"loginInput\"\n              type=\"password\"\n            />\n            <button className=\"loginButton\" type=\"submit\">\n              Sign Up\n            </button>\n            <Link  to=\"/login\">\n                <button style={{margin:'0 20%'}} className=\"loginRegisterButton\">Log in Account</button>\n            </Link>\n           \n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import axios from \"axios\";\r\nimport { useEffect, useState,useContext } from \"react\";\r\nimport \"./conversation.css\";\r\nimport { AuthContext } from \"../../context/AuthContext\"// để lấy dữ liệu user \r\nexport default function Conversation({ conversation, currentUser,convSearch, conSetup,setConSetup, socketServer }) {\r\n  const { user } = useContext(AuthContext);\r\n  const [userLocal, setUserLocal] = useState(\"\"); // user cục bộ \r\n  // ở dưới để dấu chấm hỏi để có thể có hoặc không có trường đối với 1 object => chống null lúc đầu\r\n  const PF = \"https://messenger-api-express.herokuapp.com/images/\";\r\n  \r\n   \r\n\r\n // lấy thông tin thằng user còn lại trong đoạn chat thông qua id của nó \r\n useEffect(() => {\r\n  const friendIdarray = conversation.members.filter((m) => { if(m !== currentUser._id) return m});  // lọc  ra những id khác id user\r\n  // bây giờ ta sẽ tạo ra 1 cái api trả về thẳng chuỗi cho thằng ui  bằng cách đưa lên 1 conversation \r\n  const getUser = async (iduserArray) => {\r\n    try {\r\n      const res = await axios.post(\"/conversations/getConversationName\",{iduserArray});\r\n      setUserLocal(res.data);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  \r\n  getUser(friendIdarray);\r\n  \r\n \r\n}, [currentUser, conversation]);\r\n\r\nconst handleDeleteCon= async()=>{\r\n  \r\n  alert(\"Do you want to delete this conversation\");\r\n  //xóa trong api\r\n   try {\r\n      const res = await axios.get(`/conversations/delete/${conversation._id}`);\r\n      // xóa ở local; lấy thông tin ở component cha truyền vào:\r\n      const new_arr = conSetup.filter(item => item._id !== res.data._id); // lấy ra những item khác với thằng vừa xóa\r\n      setConSetup(new_arr);\r\n      //emit đến kênh tạo chat chính ông conversation vừa tạo \r\n      const receiverId = conversation.members.filter(\r\n        (member) => member !== user._id \r\n      );\r\n     \r\n      socketServer.current.emit(\"deleteCoversation\",{\r\n           _id:conversation._id,\r\n           senderId: user._id,  // chính ông emit data \r\n           receiver: receiverId    // lọc ra \r\n         }\r\n       );\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n}\r\n  // lấy xong thông tin về thằng conf lại thì tiến hành hiển thị \r\n  return (\r\n    <div className=\"conversation\">\r\n      {/*Đường link ảnh truy cập lên server*/}\r\n      {/*set chuyển màu*/}\r\n      {\r\n        (userLocal.includes(convSearch))?(\r\n          <div className=\"conversation_child\">\r\n            <div onClick={()=>handleDeleteCon()} className=\"menu_edit_conv\">\r\n              Delete\r\n            </div>\r\n            <div style={{fontSize:\"12px\"}}>\r\n              {conversation.createdAt}\r\n            </div>\r\n            <img\r\n              className=\"conversationImg\"\r\n              src={\r\n                   PF + \"person/noAvatar.png\"\r\n              }\r\n              alt=\"\"\r\n            />\r\n            <span style={(conversation.status)?{color:'red'}:{}} className=\"conversationName\">{userLocal}</span>\r\n          </div>\r\n        ):(\r\n          <span></span>\r\n        )\r\n      }\r\n      </div>\r\n  );\r\n}","import \"./message.css\";\r\nimport { format } from \"timeago.js\";  // config thời gian cho tin nhắn \r\nimport {useState, useContext,useEffect} from \"react\";\r\nimport axios from 'axios';\r\nimport { AuthContext } from \"../../context/AuthContext\"// để lấy dữ liệu user \r\n// truyền vào tin nhắn và thông tin sở hữu của tin nhắn là bạn hay hay người nói chuyện với bạn \r\n// true false và được css \r\n// chỉ cần click vào 1 thằng thì sẽ hiện ra thông tin chat của mình với 1 đối tượng, đơn giản vậy thôi \r\n\r\nexport default function Message({ listMes,setListMes,memberMes,socketServer,message, own }) {\r\n  const { user } = useContext(AuthContext); // lấy thằng user đang xem tin nhắn này \r\n  const [deleteMesBut,setDeleteMesBut]=useState(false);\r\n  const [nameSender,setNameSender]=useState(\"Tuấn anh\")\r\n  // lấy tên người gửi\r\n  useEffect(() => {\r\n    const getNameSender= async()=>{ //get(\"/getuser/:id\"\r\n      const res = await axios.get(\"/users/getuser/\"+message.sender)\r\n      console.log(res.data);\r\n      console.log(message.sender);\r\n      setNameSender(res.data[0].username);\r\n    }\r\n    getNameSender();\r\n  },[])\r\n\r\n  const hadleDeleteMessage=async(value)=>{\r\n    alert(\"Delete Mes\");\r\n    setDeleteMesBut(false);\r\n    // call api xóa tin nhắn trong db bằng id tin nhắn \r\n    const res = await axios.get('/messages/delete/'+ message._id)\r\n    console.log(res.data); // lấy được dữ liệu của tin nhắn vừa xóa \r\n    alert(\"xóa thành công\");\r\n    // giờ emit tin nhắn vừa xóa lên để check id nếu trùng nhau thì không set ArrivalMes\r\n    \r\n   \r\n    // lấy dữ liệu reciveId \r\n    const receiverId =  memberMes.filter(\r\n      (member) => member !== user._id \r\n    );\r\n\r\n    socketServer.current.emit( \"sendMessage\",{\r\n     senderId: res.data.sender,\r\n     receiverId:receiverId,\r\n     text:res.data.text,\r\n     idConversation:message.conversationId,\r\n     idmes: message._id }\r\n    );\r\n\r\n    // set lại list tin nhắn của chính user xóa\r\n    const new_arr = listMes.filter(item => item._id !== res.data._id); // lấy ra những item khác với thằng vừa xóa\r\n    setListMes(new_arr);\r\n  }\r\n  return (\r\n    <div className={own ? \"message own\" : \"message\"}>\r\n      <div onClick={()=>setDeleteMesBut(true)} className=\"messageTop\">\r\n        <img\r\n          className=\"messageImg\"\r\n          src=\"https://messenger-api-express.herokuapp.com/images/person/noAvatar.png\"\r\n          alt=\"\"\r\n        />{/*Hình anh mặc định*/}\r\n        <p style={{position:\"relative\",marginTop:\"-20px\"}}>{nameSender}</p>\r\n        { message.text.substring(0, 7) === \"images/\" ?\r\n             message.text.substring(message.text.length - 3, message.text.length) === 'pdf'?\r\n             <embed src={`http://localhost:5000/${message.text}`}  width=\"600\" height=\"300\" type=\"application/pdf\"></embed>\r\n              :\r\n              message.text.substring(message.text.length - 4, message.text.length) === 'jpeg'?\r\n              <img\r\n              style={{ maxWidth: '200px' }}\r\n              src={`http://localhost:5000/${message.text}`}\r\n              alt=\"img\"\r\n              />\r\n                :\r\n                message.text.substring(message.text.length - 3, message.text.length) === 'png'?\r\n                <img\r\n                style={{ maxWidth: '200px' }}\r\n                src={`http://localhost:5000/${message.text}`}\r\n                alt=\"img\"\r\n                />\r\n                  :\r\n                    message.text.substring(message.text.length - 3, message.text.length) === 'jpg'?\r\n                      <img\r\n                      style={{ maxWidth: '200px' }}\r\n                      src={`http://localhost:5000/${message.text}`}\r\n                      alt=\"img\"\r\n                      />\r\n                        :\r\n                        message.text.substring(message.text.length - 3, message.text.length) === 'mp4'?\r\n                            <video\r\n                            style={{ maxWidth: '200px' }}\r\n                            src={`http://localhost:5000/${message.text}`} alt=\"video\"\r\n                            type=\"video/mp4\" controls\r\n                            />\r\n                            :\r\n                            <div style={{boxShadow:\"2px 2px 2px black\",borderRadius:\"3px\"}}>\r\n                              <p>{message.text.substring(8, message.text.length)}</p>\r\n                              <a style={{cursor:'pointer'}} href={`http://localhost:5000/${message.text}`}>\r\n                                  <button style={{borderRadius:\"2px\"}}>Download</button>\r\n                              </a>\r\n                            </div>\r\n          :\r\n          <p className=\"messageText\">{message.text}</p>\r\n          }\r\n         <div onClick={()=>hadleDeleteMessage(false)}>\r\n        {\r\n          deleteMesBut?\r\n          (\r\n               <i style={{zIndex:2,boxShadow:\"2px 2px 2px black\",borderRadius:\"50%\",width:\"15px\",height:\"15px\"}} class=\"fa-solid fa-xmark\"></i>\r\n          ):\r\n          (\r\n            <div></div>\r\n          )\r\n        }\r\n         </div>\r\n      </div>\r\n      <div className=\"messageBottom\">{format(message.createdAt)}</div>\r\n     \r\n    </div>\r\n  );\r\n}","import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport \"./chatOnline.css\"\r\n\r\n// thằng này nó sẽ hiện ra danh sách bạn bè đang online của bạn và nếu bạn click vào \r\n// thì có thể trò chuyện với họ \r\n\r\nexport default function ChatOnline({userInfor,currentUser}) {\r\n    const PF = \"https://messenger-api-express.herokuapp.com/images/\";\r\n    \r\n    const [userDetail,setUserDetail]=useState({username:\"\"})  // tránh trường hợp an null => Truyền vào user name rỗng\r\n    useEffect(() => {  // lấy ra danh sách message khi current chat thay đổi\r\n      const getuser = async () => {\r\n        try {\r\n          const res = await axios.get(\"/users/getuser/\" + userInfor.userId);  // current chat có thể rỗng vì ban đầu có thể chưa chọn \r\n          \r\n          setUserDetail(res.data[0])\r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n      };\r\n      getuser();\r\n    }, []);\r\n   \r\n    //logic cần nằm trong thẻ dom \r\n    return (\r\n      <div>\r\n          {(userInfor.userId==currentUser._id) ? (\r\n              <div>\r\n              </div>\r\n          ) : (\r\n            <div className=\"chatOnline\">\r\n        \r\n                  <div className=\"chatOnlineFriend\" >\r\n                    <div className=\"chatOnlineImgContainer\">\r\n                    <img\r\n                        className=\"conversationImg\"\r\n                        src={\r\n                          userInfor?.profilePicture\r\n                            ? PF + userInfor.profilePicture\r\n                            : PF + \"person/noAvatar.png\"\r\n                        }\r\n                        alt=\"\"\r\n                      />\r\n                      <div className=\"chatOnlineBadge\"></div>\r\n                    </div>\r\n                    <span className=\"chatOnlineName\">{userDetail.username}</span>\r\n                  </div>\r\n          </div>\r\n\r\n          )}\r\n      </div>\r\n     \r\n\r\n\r\n     \r\n    );\r\n  }","import { useContext, useEffect, useRef, useState } from \"react\";\r\nimport { AuthContext } from \"../../context/AuthContext\"// để lấy dữ liệu user \r\nimport Topbar from \"../../components/topbar/Topbar\"\r\nimport Conversation from \"../../components/conversations/Conversation\"\r\nimport Message from \"../../components/message/Message\" // config các tin nhắn \r\nimport ChatOnline from \"../../components/chatOnline/ChatOnline\" // danh sách những ông đang online  \r\nimport \"./messenger.css\"\r\nimport axios from \"axios\"\r\nimport { io } from \"socket.io-client\"   // import server \r\nimport { useDropzone } from \"react-dropzone\"\r\n\r\n// lưu ý hoạt động của set State trong re-render FE \r\n// không set lại giá trị khởi tạo \r\n// tránh những useEffect có điều kiện hoặc reference \r\n// việc re-render lại 1 ob không ảnh hưởng đến 1 object khác đã set \r\n\r\n\r\nexport default function Messenger(){\r\n  \r\n    // phân quyền hiển thị user \r\n    // nếu là host thì hiển thị toàn bộ danh sách online \r\n    // nếu không là host thì chỉ hiển thị host mà thôi \r\n    let hostId=useRef(); \r\n    hostId='62c46ce6951a21183c402403';\r\n    const [socketHost, setSocketHost] = useState({userId: '62c46ce6951a21183c402403', socketId: ''});  // lấy cả ra địa chỉ của socketHost để khi user click vào thì hiển thị luôn conversation đc tạo \r\n    // vậy câu hỏi đặt ra nếu add không online thì user click bằng cái gì \r\n\r\n   \r\n    const { user } = useContext(AuthContext);  // lấy dữ liệu tài khoản \r\n    const [conversations, setConversations] = useState([]);  // conversationid biểu thị cho cuộc trò chuyện giũa hai người \r\n    // thằng này chứa 1 mảng gôm các id của conversation \r\n    const [currentChat, setCurrentChat] = useState(null); // set trạng thái chat,\r\n    // lấy dữ liệu các cuộc trò chuyện trong db \r\n    const [messages, setMessages] = useState([]); // lấy danh sách các tin nhắn \r\n\r\n    const [newMessage, setNewMessage] = useState(\"\") // nhập tin nhắn mới \r\n   \r\n    const scrollRef = useRef(); // config cho tin nhắn mới sẽ hiện xuống dưới \r\n    // thằng cuộn này hoạt động khi ta có thêm tin nhắn; mảng tin nhắn thay đổi \r\n    // thằng này set ở mỗi tin nhắn \r\n   \r\n    const [chatUsers, setChatUsers] = useState([]);  // lấy danh sách user\r\n    \r\n\r\n    // chộp tin nhắn vừa được gửi sau đó thêm vào list mesage ban đầu rồi render ra \r\n    // cách bình thường là phỉa reload page hoặc chỉ thấy tin nhắn của mình \r\n    const [arrivalMessage, setArrivalMessage] = useState(null);// lấy thông tin của tin nhắn vừa gửi \r\n    const [arrivalConversation, setArrivalConversation] = useState(null);\r\n\r\n    const[searchCon,setSearchCon]=useState('')\r\n    const socket = useRef(); // để tránh việc thay đổi socket id trong 1 phiên làm việc \r\n    \r\n    // luôn lắng nghe 1 lần khi reload page \r\n    // sẽ hoạt động đếu bắt được tín hiệu từ server\r\n    //https://socket-mes.herokuapp.com/\r\n    useEffect(() => {  // lắng nghe tin nhắn được gửi tới socketid của nó từ server\r\n      socket.current = io(\"https://socket-server-mes.herokuapp.com/\"); // dùng ig... là kết nối rối \r\n      // trên thằng server cũng nhận được 1 object socket\r\n      socket.current.on(\"getMessage\", (data) => {\r\n        \r\n        const getMessages = async () => {\r\n            const res = await axios.get(\"/messages/\" + data.idConversation);  // current chat có thể rỗng vì ban đầu có thể chưa chọn \r\n            const test = res.data.filter(item => item._id === data.idmes); // lôi ra những thằng có id bằng id socket gửi \r\n            if(test.length===0){ // nếu không có đã xóa\r\n              setMessages(res.data);      // set lại data ui từ data trong db\r\n            }\r\n            else{\r\n              setArrivalMessage({\r\n                sender: data.senderId,\r\n                text: data.text,\r\n                createdAt: Date.now(),\r\n                conversationId:data.idConversation,\r\n                _id:data.idmes\r\n              });\r\n            }\r\n        };\r\n        getMessages();\r\n      \r\n      });\r\n      // lắng nghe liên tục bất chấp hook\r\n      socket.current.on(\"getConversation\", (data) => {\r\n        console.log(data)\r\n        const getCoversation = async () => {\r\n          // call api lấy ra danh sách conversation ứng với id  \r\n          const res = await axios.get(\"/conversations/\" + user._id);\r\n          const test = res.data.filter(item => item._id === data._id); // lôi ra những thằng có id bằng id socket gửi \r\n          if(test.length===0){ // nếu có đối tượng nào bằng => Đã xóa trong cơ sở dữ liệu\r\n            setConversations(res.data); \r\n          }\r\n          else{\r\n            setArrivalConversation({  // thêm tin nhắn mới đến \r\n              _id:data._id,\r\n              members:data.members,\r\n              status:true,\r\n              createdAt: Date.now(),\r\n            });\r\n          }\r\n        }\r\n        getCoversation(); // chú ý chỗ đặt \r\n      });\r\n    }, []);\r\n\r\n\r\n     // hàm sắp xếp conv \r\n    const sortCoversation =  ()=>{\r\n      let new_conv_a=conversations;\r\n      let new_conv2=[];\r\n      let new_conv3=[];\r\n      for(let i=0;i<new_conv_a.length;i++){\r\n        if(new_conv_a[i].status){\r\n          new_conv2.push(new_conv_a[i])\r\n        }\r\n        else if(!new_conv_a[i].status){\r\n          new_conv3.push(new_conv_a[i])\r\n        }\r\n      }\r\n      for(let i=0;i<new_conv3.length;i++){\r\n        new_conv2.push(new_conv3[i])\r\n      }\r\n      return(new_conv2);\r\n    }\r\n\r\n    \r\n    // thêm mesage ,conv; chỉnh conv lúc có mes mới \r\n    // thằng useEffect này khi chương trình bật nó sẽ chạy ít nhất 1 lần \r\n    // các tác vụ thực hiện nên đưa vào luông khi có dư liệu arrival\r\n    useEffect(() => {\r\n      // logic code: nếu arrivalMessage khác null( chỉ xét khi nó có sự thay đổi giá trị)\r\n      // và trong thằng currenChat check được có tồn tại id sender của arrival thì nó thêm vào danh sách mesage và render lại \r\n      arrivalMessage &&\r\n        currentChat?.members.includes(arrivalMessage.sender) &&\r\n        setMessages((prev) => [...prev, arrivalMessage]);\r\n      \r\n      // có arrivalMassage thì cập nhật conversation theo id\r\n      if(arrivalMessage){ \r\n        let new_conv=[];\r\n        conversations.map((mem)=>{\r\n          if(mem._id ==arrivalMessage.conversationId){\r\n            mem.status=true;\r\n          }\r\n          new_conv.push(mem)\r\n        })\r\n        // có thời gian viết lại hàm sắp xếp\r\n        let new_conv2=[]; //mới đến mặc định true\r\n        let new_conv3=[];\r\n        for(let i=0;i<new_conv.length;i++){\r\n          if(new_conv[i].status){\r\n            new_conv2.push(new_conv[i])\r\n          }\r\n          else if(!new_conv[i].status){\r\n            new_conv3.push(new_conv[i])\r\n          }\r\n        }\r\n        for(let i=0;i<new_conv3.length;i++){\r\n          new_conv2.push(new_conv3[i])\r\n        }\r\n        setConversations(new_conv2);\r\n      }\r\n      \r\n       \r\n\r\n      if(arrivalConversation){\r\n        if(arrivalConversation.members.includes(user._id)){\r\n          let new_conv_a=conversations;\r\n          let new_conv2=[arrivalConversation]; //mới đến mặc định true\r\n          let new_conv3=[];\r\n          for(let i=0;i<new_conv_a.length;i++){\r\n            if(new_conv_a[i].status){\r\n              new_conv2.push(new_conv_a[i])\r\n\r\n            }\r\n            else if(!new_conv_a[i].status){\r\n              new_conv3.push(new_conv_a[i])\r\n            }\r\n          }\r\n          for(let i=0;i<new_conv3.length;i++){\r\n            new_conv2.push(new_conv3[i])\r\n          }\r\n          setConversations(new_conv2);\r\n        }\r\n      }\r\n    }, [arrivalConversation,arrivalMessage, currentChat]);\r\n    \r\n   \r\n\r\n\r\n    // chạy 1 lần cho đến khi user thay đổi \r\n    // cập nhật thông tin user đăng nhập và lấy danh sách user online \r\n    // reference user chỉ có tác dụng tạo kết nối; còn thằng socket sẽ liên tục lắng nghe và cập nhật ngay khi có thay đổi \r\n    useEffect(() => {\r\n      socket.current.emit(\"addUser\", user._id); // cập nhật idUser lên server socket \r\n      socket.current.on(\"getUsers\", (users) => { // thằng web socket trả về những user đang kết nối với web socket server \r\n        setChatUsers(users); // set những User có thể tham gia chat \r\n      });\r\n    }, [user]);\r\n \r\n    // láy thông tin conversatio \r\n    useEffect(() => {\r\n      const getConversations = async () => {\r\n        try {\r\n          const res = await axios.get(\"/conversations/\" + user._id);\r\n          // sắp xếp\r\n          let new_conv_a=res.data;\r\n          let new_conv2=[];\r\n          let new_conv3=[];\r\n          for(let i=0;i<new_conv_a.length;i++){\r\n            if(new_conv_a[i].status){\r\n              new_conv2.push(new_conv_a[i])\r\n            }\r\n            else if(!new_conv_a[i].status){\r\n              new_conv3.push(new_conv_a[i])\r\n            }\r\n          }\r\n          for(let i=0;i<new_conv3.length;i++){\r\n            new_conv2.push(new_conv3[i])\r\n          }\r\n          \r\n          setConversations(new_conv2);\r\n           \r\n         \r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n      };\r\n      getConversations();\r\n    }, [user._id,arrivalMessage,currentChat]); // cập nhận danh sách conversation khi có tin nhắn mới \r\n    \r\n    // currentChat = conversation được chọn => CurrentChat.id= conversaton._id \r\n    // Trong thằng messenger có lưu 1 trường là id conversation \r\n    useEffect(() => {  // lấy ra danh sách message khi current chat thay đổi\r\n      const getMessages = async () => {\r\n        try {\r\n          const res = await axios.get(\"/messages/\" + currentChat?._id);  // current chat có thể rỗng vì ban đầu có thể chưa chọn \r\n          setMessages(res.data);\r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n      };\r\n      getMessages();\r\n    }, [currentChat,arrivalMessage]);// đừng để thành vòng lặp vô hạn \r\n    \r\n    // chat\r\n    const handleSubmit = async (e) => {\r\n      e.preventDefault();\r\n      // current \r\n      const message = {\r\n        // thu thập dữ liệu \r\n        sender: user._id,\r\n        text: newMessage,  // set liên tục ; vừa gõ vừa re-render FE \r\n        conversationId: currentChat._id,// thu thập dữ liệu \r\n      };\r\n      // current chat lưu 1 mảng gômg id của user và id của người tham gia chat \r\n      const receiverId = currentChat.members.filter(\r\n        (member) => member !== user._id \r\n      );\r\n      \r\n      // bắn đoạn tin lên web socket \r\n      // quan trọng là thằng socket này đã mang id\r\n      try {\r\n        // cập nhật dữ liệu trong db về conv nhận đc tin nhắn \r\n        const res_conv = await axios.post(\"/conversations/update\", {id:currentChat._id,status:true});  // call api gửi tin nhắn vào db \r\n \r\n        const res = await axios.post(\"/messages\", message);  // call api gửi tin nhắn vào db \r\n        // trả về message vừa nhập \r\n        // sau đó set bổ sung vào mảng  và emit tin nhắn nhận được \r\n        socket.current.emit(\"sendMessage\", {\r\n          senderId: user._id,\r\n          receiverId: receiverId,// 1 mảng \r\n          text: newMessage,\r\n          idConversation:currentChat._id,\r\n          idmes:res.data._id\r\n        });\r\n        console.log(socket);\r\n        setMessages([...messages, res.data]);  // set lại danh sách tin nhắn => re-render -FE \r\n        setNewMessage(\"\");   // set lại tin nhắn \r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n    \r\n\r\n    // upload file \r\n    const { getRootProps, getInputProps } = useDropzone({\r\n      // bỏ accepted đi là up file nào cũng được hết \r\n\r\n      // cho up từng file 1 trước \r\n      onDrop: (accceptedFiles)=>{\r\n          \r\n          console.log(accceptedFiles[0]); // lấy dữ liệu từ file tại đây và tiến hành socket và re-render ui \r\n          \r\n          // upload file \r\n          let formData = new FormData;\r\n          const config = {\r\n              header: { 'content-type': 'multipart/form-data' }\r\n          }\r\n          formData.append(\"file\", accceptedFiles[0])\r\n          axios.post('/chat/uploadfiles', formData, config)\r\n          .then(response => {\r\n            if (response.data.success) {\r\n              \r\n\r\n              // emit tin nhắn lên ws\r\n\r\n              const message = {\r\n                // thu thập dữ liệu \r\n                sender: user._id,\r\n                text:\"images/\"+ response.data.url,  // tên file \r\n                conversationId: currentChat._id,// thu thập dữ liệu \r\n              };\r\n              // current chat lưu 1 mảng gômg id của user và id của người tham gia chat \r\n              const receiverId = currentChat.members.filter(\r\n                member => member !== user._id\r\n              );\r\n              try {\r\n                // cập nhật dữ liệu trong db về conv nhận đc tin nhắn \r\n                axios.post(\"/conversations/update\", {id:currentChat._id,status:true})  // call api gửi tin nhắn vào db \r\n                .then(response1 => {})\r\n                axios.post(\"/messages\", message)  // call api gửi tin nhắn vào db \r\n                .then(response2 => {\r\n                      // bắn đoạn tin lên web socket \r\n                  // quan trọng là thằng socket này đã mang id\r\n                  console.log(response2)\r\n                  socket.current.emit(\"sendMessage\", {\r\n                    idmes:response2.data._id,\r\n                    senderId: user._id,\r\n                    receiverId,\r\n                    text:response2.data.text, // tên file \r\n                    idConversation:currentChat._id\r\n                  });\r\n                    // trả về message vừa nhập \r\n                  // sau đó set bổ sung vào mảng \r\n                  console.log(response2.data.text);\r\n                  setMessages([...messages, response2.data]);  // set lại danh sách tin nhắn => re-render -FE \r\n                  setNewMessage(\"\");   // set lại tin nhắn \r\n                }) \r\n              } catch (err) {\r\n                console.log(err);\r\n              }\r\n            }\r\n        })\r\n      }\r\n    }); \r\n   \r\n    // khi xem conv\r\n    const handleSeeCoversation = async (c)=>{\r\n      setCurrentChat(c); // re-render \r\n      \r\n      let index = conversations.findIndex((val) => val._id === c._id);\r\n      let new_conv=conversations;\r\n      new_conv[index].status= false;\r\n\r\n      const sort_conv=sortCoversation()\r\n      setConversations(sort_conv);\r\n      const res = await axios.post(\"/conversations/update\", {id:c._id,status:false});  // call api gửi tin nhắn vào db \r\n    }\r\n   \r\n    // tạo conversation\r\n    const handleCreateCoversation = async (receiver)=>{\r\n      var a=0;\r\n      try {\r\n         // console.log(conversations)\r\n         for(var i=0;i<conversations.length;i++){\r\n           if(conversations[i].members.includes(receiver)){\r\n            a=a+1;\r\n           }\r\n         }\r\n         if(a>0){\r\n          alert(\"Đã có cov không call api\")\r\n         }\r\n         else{\r\n          const res = await axios.post(\"/conversations\", {senderId:user._id,receiverId:receiver});  // call api gửi tin nhắn vào db \r\n          // trả về message vừa nhập \r\n          // sau đó set bổ sung vào mảng \r\n          // thông báo lên web soket \r\n          socket.current.emit(\"CreateConversation\", {\r\n            _id:res.data._id,\r\n            senderId: user._id,  // gửi lên dữ liệu sender \r\n            receiver:receiver\r\n          });\r\n          setConversations([...conversations, res.data]);  // set lại danh sách tin nhắn => re-render -FE \r\n          }\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n\r\n    }\r\n\r\n    \r\n    useEffect(() => {\r\n      scrollRef.current?.scrollIntoView({ behavior: \"smooth\" });// đoạn code để trượt xuống khi có tin nhắn mới \r\n    }, [messages]);\r\n    \r\n    console.log(conversations);\r\n    console.log(messages)\r\n    console.log(chatUsers)\r\n    return (\r\n        <div>\r\n              <Topbar socketServer={socket}/>\r\n      <div className=\"messenger\">\r\n        <div className=\"chatMenu\">\r\n          <div className=\"chatMenuWrapper\">\r\n            <input placeholder=\"Search for friends\" className=\"chatMenuInput\"onChange={e=>setSearchCon(e.target.value)}   />\r\n              {/*click thì set thông tin currentchat theo thông tin của conversation*/}\r\n              \r\n                {conversations.map((c) => (\r\n                  <div key={c._id} onClick={() =>handleSeeCoversation(c)}>\r\n                    {/*nếu c là true thì cho là đỏ( chưa đọc còn nếu là false thì màu đen*/}\r\n                    <Conversation socketServer={socket} conSetup={conversations} setConSetup={setConversations} conversation={c} currentUser={user} convSearch={searchCon} />\r\n                  </div>\r\n                ))}\r\n              \r\n          </div>\r\n        </div>\r\n        <div className=\"chatBox\">\r\n          <div className=\"chatBoxWrapper\">\r\n          {currentChat ? (\r\n              <>\r\n                <div className=\"chatBoxTop\">\r\n                  {messages.map((m) => (\r\n                    <div ref={scrollRef}>\r\n                      {/*chỉnh giá trị own dựa vào cách so sánh người gửi tin nhắn với id của người đăng nhập*/}\r\n                      <Message key={m._id} listMes={messages} setListMes={setMessages} memberMes={currentChat.members} socketServer={socket} message={m} own={m.sender === user._id} />\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n                <div className=\"chatBoxBottom\">\r\n                  <textarea\r\n                    className=\"chatMessageInput\"\r\n                    placeholder=\"write something...\"\r\n                    onChange={(e) => setNewMessage(e.target.value)}\r\n                    value={newMessage}\r\n                  ></textarea>\r\n                  <button className=\"chatSubmitButton\" onClick={handleSubmit}>\r\n                    Send\r\n                  </button>\r\n                </div>\r\n                {/*upload file*/}\r\n                <div {...getRootProps({ className: \"dropzone\" })}>\r\n                  \r\n                  <input className=\"input-zone\" {...getInputProps()} />\r\n                  <i style={{cursor:\"pointer\",fontSize:\"25px\",zIndex: 10,position:\"fixed\",bottom:10,marginLeft:\"40%\"}} className=\"fa-solid fa-upload\"></i>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <span className=\"noConversationText\">\r\n                Open a conversation to start a chat.\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"chatOnline\">\r\n              <div className=\"chatOnlineWrapper\">\r\n                      {chatUsers.map((m) => (\r\n                            <div onClick={() => handleCreateCoversation(m.userId)}>\r\n                              {/*chỉnh giá trị own dựa vào cách so sánh người gửi tin nhắn với id của người đăng nhập*/}\r\n                              {/*Bây giờ sẽ truyền vào mảng gồm userId và socketID*/}\r\n                              <ChatOnline \r\n                                key={m.userId}\r\n                                userInfor={m} \r\n                                currentUser={user}\r\n                                />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n        </div>\r\n      </div>\r\n        </div>\r\n    )\r\n}","import { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nconst courses= [{id:\"1\",name:\"Tiếng anh\"},{id:\"2\",name:\"Tiếng pháp\"}]\r\nexport default function Test() {\r\n  const [checked, setChecked]=useState([]);// dữ liệu state là 1 mảng có giá trị bằng với mảng truyền vào \r\n  const handleCheck=(id) =>{\r\n     setChecked( prev=>{\r\n       const isChecked =checked.includes(id)\r\n       if(isChecked){\r\n         return checked.filter(item=>item!==id) // để lại những đối tượng khác thằng id\r\n       }\r\n       else{\r\n         return[...prev,id] \r\n       }\r\n     })\r\n  }\r\n\r\n  const handleSubmit =()=>{\r\n    console.log({id:checked})\r\n  }\r\n\r\n\r\n  return (\r\n      <div className=\"App\" style={{padding:20}}>\r\n        {courses.map(course =>(\r\n          <div key={course.id}>\r\n            <input type=\"checkbox\"\r\n            checked={checked.includes(course.id)}// trả về boolen\r\n            onChange={()=>handleCheck(course.id)}\r\n            />\r\n            {course.name}\r\n          </div>\r\n        ))}\r\n      <button onClick={handleSubmit}>Submit</button>\r\n    </div>\r\n\r\n  );\r\n}\r\n","import Home from \"./pages/home/Home\";\nimport Login from \"./pages/login/Login\";\nimport Profile from \"./pages/profile/Profile\";\nimport Register from \"./pages/register/Register\";\nimport Messenger from \"./pages/messenger/Messenger\"\nimport Test from \"./pages/test\"\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport { useContext } from \"react\";\nimport { AuthContext} from \"./context/AuthContext\";\n\nfunction App() {\n  // trong authContext chứa dữ liệu người dùng lấy từ localStorage \n  const { user } = useContext(AuthContext);  // lấy dữ liệu từ context \n  return (\n    <Router>\n      <Switch>\n        {/*Nếu user đúng thì trang ban đầu hiển thị component home không thì thi register*/}\n        <Route exact path=\"/\">\n          {user ? <Home /> : <Register />}\n        </Route>\n\n        {/*Thằng redirect này đã giải quyết được bài toán tự động chuyển trang */}\n        {/*Tất cả dựa vào 1 dữ liệu lưu vào local Storage }\n        {/*Vào trang Login , nếu user đã tồn tại thì vẫn redirect đến trang login vì để tránh xung đột local storage với các web site khác */}\n        <Route path=\"/test\"> <Test/></Route>\n        <Route path=\"/login\"> <Login />\n        </Route>\n        <Route path=\"/register\">\n          <Register />\n        </Route>\n        <Route path=\"/messenger\">\n          {/*Nếu không có user thì chuyên đến trang chính; user lấy từ AuthContext*/}\n          {!user ? <Redirect to=\"/login\" /> : <Messenger />}\n        </Route>\n        {/*Config route đi vào profile*/}\n        <Route path=\"/profile/:username\">\n          <Profile />\n        </Route>\n\n        {/*Ở đây chưa có phần config đi vào chat*/}\n       \n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { AuthContextProvider } from \"./context/AuthContext\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <App />\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}